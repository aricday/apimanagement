<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<l7:Bundle xmlns:l7="http://ns.l7tech.com/2010/04/gateway-management">
    <l7:References>
        <l7:Item>
            <l7:Name>Sample_Folder</l7:Name>
            <l7:Id>d7128cef34420142706c03d2d382bf0c</l7:Id>
            <l7:Type>FOLDER</l7:Type>
            <l7:TimeStamp>2018-02-27T19:14:43.185-08:00</l7:TimeStamp>
            <l7:Resource>
                <l7:Folder folderId="0000000000000000ffffffffffffec76" id="d7128cef34420142706c03d2d382bf0c" version="0">
                    <l7:Name>Sample_Folder</l7:Name>
                </l7:Folder>
            </l7:Resource>
        </l7:Item>
        <l7:Item>
            <l7:Name>Sample_Active_Directory</l7:Name>
            <l7:Id>d7128cef34420142706c03d2d382bee7</l7:Id>
            <l7:Type>ID_PROVIDER_CONFIG</l7:Type>
            <l7:TimeStamp>2018-02-27T19:14:44.269-08:00</l7:TimeStamp>
            <l7:Resource>
                <l7:IdentityProvider id="d7128cef34420142706c03d2d382bee7" version="1">
                    <l7:Name>Sample_Active_Directory</l7:Name>
                    <l7:IdentityProviderType>LDAP</l7:IdentityProviderType>
                    <l7:Properties>
                        <l7:Property key="adminEnabled">
                            <l7:BooleanValue>false</l7:BooleanValue>
                        </l7:Property>
                        <l7:Property key="groupCacheMaximumAge">
                            <l7:LongValue>60000</l7:LongValue>
                        </l7:Property>
                        <l7:Property key="groupCacheMaximumAgeUnit">
                            <l7:StringValue>minutes</l7:StringValue>
                        </l7:Property>
                        <l7:Property key="groupCacheSize">
                            <l7:IntegerValue>100</l7:IntegerValue>
                        </l7:Property>
                        <l7:Property key="groupMaximumNesting">
                            <l7:IntegerValue>5</l7:IntegerValue>
                        </l7:Property>
                        <l7:Property key="groupMembershipCaseInsensitive">
                            <l7:BooleanValue>false</l7:BooleanValue>
                        </l7:Property>
                        <l7:Property key="reconnectTimeout">
                            <l7:LongValue>60000</l7:LongValue>
                        </l7:Property>
                        <l7:Property key="userCertificateUsage">
                            <l7:StringValue>None</l7:StringValue>
                        </l7:Property>
                        <l7:Property key="userLookupByCertMode">
                            <l7:StringValue>Common Name from Certificate</l7:StringValue>
                        </l7:Property>
                    </l7:Properties>
                    <l7:Extension>
                        <l7:LdapIdentityProviderDetail>
                            <l7:SourceType>MicrosoftActiveDirectory</l7:SourceType>
                            <l7:ServerUrls>
                                <l7:StringValue>ldap://host:port</l7:StringValue>
                            </l7:ServerUrls>
                            <l7:UseSslClientAuthentication>false</l7:UseSslClientAuthentication>
                            <l7:SearchBase>ou=day</l7:SearchBase>
                            <l7:BindDn>cn=Manager</l7:BindDn>
                            <l7:BindPassword bundleKey="$L7C2$1bead,kp5BOYKMbngQg/hP70zbVm8tRWLUsl8yNVeQSirTaA4=$tCEqGdA9HPRhota/kgUiwm3EmCBAjpoCOpj9QBzk+7oTodmdNy4FtYVX/ID6TRAD8euGrepP1Lu25UCrOsxMYEsG8FW9JP1QkJYhOfjhv3mEdjeixJJfaNO0TIH9w+4P">$L7C2$1,vngXHqtx07YYDuT+8TTBp672lNAXpEs+0VfGuUUOBwQ=$glNPrMz4wBAmhNrf9SWGfjW/2nRSZun5dyHHhj1yEsPL0qfJpITAcAY9yeY6xhlVOe3ubPBoiGj3Qxd2DBQoyQ==</l7:BindPassword>
                            <l7:UserMappings>
                                <l7:Mapping>
                                    <l7:ObjectClass>user</l7:ObjectClass>
                                    <l7:Mappings>
                                        <l7:Property key="emailNameAttrName">
                                            <l7:StringValue>mail</l7:StringValue>
                                        </l7:Property>
                                        <l7:Property key="firstNameAttrName">
                                            <l7:StringValue>givenName</l7:StringValue>
                                        </l7:Property>
                                        <l7:Property key="kerberosAttrName">
                                            <l7:StringValue>sAMAccountName</l7:StringValue>
                                        </l7:Property>
                                        <l7:Property key="kerberosEnterpriseAttrName">
                                            <l7:StringValue>userPrincipalName</l7:StringValue>
                                        </l7:Property>
                                        <l7:Property key="lastNameAttrName">
                                            <l7:StringValue>sn</l7:StringValue>
                                        </l7:Property>
                                        <l7:Property key="loginAttrName">
                                            <l7:StringValue>sAMAccountName</l7:StringValue>
                                        </l7:Property>
                                        <l7:Property key="nameAttrName">
                                            <l7:StringValue>cn</l7:StringValue>
                                        </l7:Property>
                                        <l7:Property key="objClass">
                                            <l7:StringValue>user</l7:StringValue>
                                        </l7:Property>
                                        <l7:Property key="passwdAttrName">
                                            <l7:StringValue>userPassword</l7:StringValue>
                                        </l7:Property>
                                        <l7:Property key="userCertAttrName">
                                            <l7:StringValue>userCertificate</l7:StringValue>
                                        </l7:Property>
                                    </l7:Mappings>
                                </l7:Mapping>
                            </l7:UserMappings>
                            <l7:GroupMappings>
                                <l7:Mapping>
                                    <l7:ObjectClass>group</l7:ObjectClass>
                                    <l7:Mappings>
                                        <l7:Property key="memberAttrName">
                                            <l7:StringValue>member</l7:StringValue>
                                        </l7:Property>
                                        <l7:Property key="nameAttrName">
                                            <l7:StringValue>cn</l7:StringValue>
                                        </l7:Property>
                                        <l7:Property key="objClass">
                                            <l7:StringValue>group</l7:StringValue>
                                        </l7:Property>
                                    </l7:Mappings>
                                    <l7:Properties>
                                        <l7:Property key="memberStrategy">
                                            <l7:StringValue>Member is User DN</l7:StringValue>
                                        </l7:Property>
                                    </l7:Properties>
                                </l7:Mapping>
                            </l7:GroupMappings>
                            <l7:SpecifiedAttributes/>
                            <l7:NtlmProperties>
                                <l7:Property key="domain.dns.name">
                                    <l7:StringValue/>
                                </l7:Property>
                                <l7:Property key="domain.netbios.name">
                                    <l7:StringValue/>
                                </l7:Property>
                                <l7:Property key="enabled">
                                    <l7:StringValue>false</l7:StringValue>
                                </l7:Property>
                                <l7:Property key="host.dns.name">
                                    <l7:StringValue/>
                                </l7:Property>
                                <l7:Property key="host.netbios.name">
                                    <l7:StringValue/>
                                </l7:Property>
                                <l7:Property key="server.dns.name">
                                    <l7:StringValue/>
                                </l7:Property>
                                <l7:Property key="service.account">
                                    <l7:StringValue/>
                                </l7:Property>
                            </l7:NtlmProperties>
                        </l7:LdapIdentityProviderDetail>
                    </l7:Extension>
                </l7:IdentityProvider>
            </l7:Resource>
        </l7:Item>
        <l7:Item>
            <l7:Name>cluster.hostname</l7:Name>
            <l7:Id>0000000000000000fffffffffff5519f</l7:Id>
            <l7:Type>CLUSTER_PROPERTY</l7:Type>
            <l7:TimeStamp>2018-02-27T19:14:44.270-08:00</l7:TimeStamp>
            <l7:Resource>
                <l7:ClusterProperty id="0000000000000000fffffffffff5519f" version="2">
                    <l7:Name>cluster.hostname</l7:Name>
                    <l7:Value>gw1.day.apim.ca.com</l7:Value>
                </l7:ClusterProperty>
            </l7:Resource>
        </l7:Item>
        <l7:Item>
            <l7:Name>SSL</l7:Name>
            <l7:Id>00000000000000000000000000000002:SSL</l7:Id>
            <l7:Type>SSG_KEY_ENTRY</l7:Type>
            <l7:TimeStamp>2018-02-27T19:14:44.303-08:00</l7:TimeStamp>
            <l7:Resource>
                <l7:PrivateKey alias="SSL" id="00000000000000000000000000000002:SSL" keystoreId="00000000000000000000000000000002">
                    <l7:CertificateChain>
                        <l7:CertificateData>
                            <l7:IssuerName>CN=ip-172-31-6-116</l7:IssuerName>
                            <l7:SerialNumber>6549888450617558673</l7:SerialNumber>
                            <l7:SubjectName>CN=ip-172-31-6-116</l7:SubjectName>
                            <l7:Encoded>MIIC+DCCAeCgAwIBAgIIWuXg19F+RpEwDQYJKoZIhvcNAQEMBQAwGjEYMBYGA1UEAxMPaXAtMTcyLTMxLTYtMTE2MB4XDTE4MDIyODAxNTU0NFoXDTI4MDIyNjAxNTU0NFowGjEYMBYGA1UEAxMPaXAtMTcyLTMxLTYtMTE2MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAnPPqwUsFUdQoALI0GOq4DLUJXTlYYAucXTrnOVxWFBc3LfL//hmz9TGQR9dBJMWMEj+iCEw+DmqkQc5pkvCTnM3xkPxsl7c0Lutzhw7ytPL3WBCD4wKR1xGaPVCnzcdSqVtpgx+emi+Z5ZzgGl7ZDVF6yqH9ujdiHDDhWfN6UoVyx9W0tSnASbb6eRmtkjRazJQ+Tb61l/NtbcVNQmBGJgZ+CftTDpTt/U3s5COmFa5M2sZ1r0YBwD03yLh8XhN/qh+I/VWKWHnEWw8Lli83EjWCGoTccpDtluEmmERKgIhK4jXhob/Ei3LeoyHfor2c5olEp2jgEqlltEWP+1fwtQIDAQABo0IwQDAdBgNVHQ4EFgQUAKL+pt0KuwcpsExr5VmuivlmIEQwHwYDVR0jBBgwFoAUAKL+pt0KuwcpsExr5VmuivlmIEQwDQYJKoZIhvcNAQEMBQADggEBAG9CZ+dZXfnf7mBozVZh14nwMjlON8J4FolGvFZobA6xrhXqrAF2gjV3Ve7mxOa9EO9byHYdl6QoXM9I3lo3n/84A/bCGAT9yQd+N2S/Kk40unUcP6yvJ/KvLb852p5UW6Dv4gJ2NQr3xOL2DQQC1TX6k0DAgFMr8TpDBvGPsFs0UOTxyvQUDkTxZY3+L9i9moieSdSruEbu0VQFI1J7YyncrYC0YvSLXQKd5XCQ7UqTaOD12hCSqYNgEUsP6efqIXX/uFlWctG1DXJiHVjwBEXWkEOL8uv8conlhBk4uVKQme3XfEoUU6U8yy9XuapNs9Mb4T2KdAv2oC3F88FuKzk=</l7:Encoded>
                        </l7:CertificateData>
                    </l7:CertificateChain>
                    <l7:Properties>
                        <l7:Property key="keyAlgorithm">
                            <l7:StringValue>RSA</l7:StringValue>
                        </l7:Property>
                        <l7:Property key="keyData">
                            <l7:StringValue algorithm="RSA" bundleKey="$L7C2$1bead,kp5BOYKMbngQg/hP70zbVm8tRWLUsl8yNVeQSirTaA4=$tCEqGdA9HPRhota/kgUiwm3EmCBAjpoCOpj9QBzk+7oTodmdNy4FtYVX/ID6TRAD8euGrepP1Lu25UCrOsxMYEsG8FW9JP1QkJYhOfjhv3mEdjeixJJfaNO0TIH9w+4P">$L7C2$1,xQYRLCyy8/CWwicCWWqXUcsqT9nRYasnbGLYwl+FD5U=$yDVrzCBV9ghWx63sdUjWpWl9aJbb3ap0fTkKNjXKYG5b9nbU/P4rjGcjp770lBm0MyXlGUjT886xWsWAkYJ1HygkzJhxcAKa2zy0GFzdRPT5hrXdfzZQXmnQkf/2hdI4orWT4EbVaHdXMWJjCp1MkeVoDcZ2Tv6dPKuyRaD2Tnu1QgjuBTqT25XEBp2pjjSHKmO02OjMF/klKWind11IXZD3tsSGW5CF/4eGP4oqVluXJf8EQTTvW9ekIp7kYv4Jfa+wlRqj/dhbDHoet0UpROLMmYBPrV9X7Fr2Z9XDuYB0q8/+UafwO8ccLgsbIqPkwfDq7K9sjyKtX3VFRNPrR8h+EeJQ6559RZp5mmW371/n6Fu4zgntPsXuHbDhPYVRP+hn7Z6wsRRszqTwTvREAqMgJS9bL29wLdOyRBF8NQJ/vruadLktEW/Mv9WlOO04GH1xuII6T5VbGuaUfCfe6xpU/Sdp3XUB40LS4P8RnhET0kbGnb3H6mC5kNu406Q32V9B3UrgyPetOEARdcy35cVv6+bjYpcrbPK4HeCHSvMnHyyMHCny5GLIqqZtjO8roTNeSwWRMK832kIq6kuM551pOrjG44u/hy64uuDlmzhuEbLz0YHLm25mHq+nJ9VBLuI9X46QY0PV2vaZXmhVVn+13E7Rit0oQNlioFEV8vNoLpspgJFdOxKR+mql+kydpSnYYsYwiH0hd/gQxYMvFwEh27G2kC7TCp/TLd4xZiCAcIs9IGe23P01POCRnxA6NN2DKIuA6UWMwyItqKepzx7Y8Y1e8Caf2lnmJIhJwEVEJigOb7OloqTDkky2cAAJkg9KnnK4xSqX53+zj8ou1hKLg2HslCbmoRlktELWUIjeCxPQUpwV2D2rFhogEXWmF+dY39YCmwSG3G8IHXISam+wKHk/y1gYsoC0EbTVEw1lrYHsDOlmC+ZHPEdAk+Aviu7oNquyRLVqcu/0Fkfwr0QvJlYFnE0TMVKghk1CAoQ0uw4GxrRWA9pDpRolHw3d/feZLa91m7+17uVaMAclWeZornu97/fIz/73DFlLanyVQbzIXYtAyb1amiL3scWzgwgZxQryBiDYkp2C6VnbTk5CO3G1Ng5VHgxOVsszO5uohLN+QHUgihHImZZXSfr0GyOD7dodi7i5uKLNVhE75cw/KG9ggsWcgqFRSiAqYSFGik4XkBQVVYRs+dP0nHYv2+z5QZ9O1uZkotCzW5nmOnY3rsoKvUIDIJYoDjiCYRRMjS6ZKWUMhYZfxNCGne5IjXVOEbdFqWBeV9yb4X+VCTPafA2Kyl241RnMZVS2ZHcXewD2Z5cOPVfVdeUQXjoUVUrIrnqys3WvKhHzCmY8QQbZe1sA9jgw/IDtoe9XmK7UApwVFHtIm+CIIc9yxf/2056qxyUvPs1NF3nPv60c/r4ZEir2eh/cvzGmWvSxtY2ByxcDjVuswIFWEqXJQHVZxzB9Q+VB5dhSfLp44bzMH8XadJh2nr9YfEhxPc1Hm/NGtfOM+x7JS+9bOMlZb9RReBoq7hGZ75XquEY47AevEnk/wxFzLAK0Kds74w47HNkQBkZCo1iEWpbc7Pty21RFcuNYr6bQgNKrYsCAgvekKUsDvglK8iPOgdaLI2lPUoRAyt8Aw4ygKRBOPPQbDtjtLmtxWhS0fCIQTK4x1Q8FtTWuscnBKdmBJrG/tKHi2vk=</l7:StringValue>
                        </l7:Property>
                        <l7:Property key="specialPurposes">
                            <l7:StringValue>Default SSL Key</l7:StringValue>
                        </l7:Property>
                    </l7:Properties>
                </l7:PrivateKey>
            </l7:Resource>
        </l7:Item>
        <l7:Item>
            <l7:Name>Sample Service</l7:Name>
            <l7:Id>d7128cef34420142706c03d2d382bf52</l7:Id>
            <l7:Type>SERVICE</l7:Type>
            <l7:TimeStamp>2018-02-27T19:14:44.384-08:00</l7:TimeStamp>
            <l7:Resource>
                <l7:Service id="d7128cef34420142706c03d2d382bf52" version="2">
                    <l7:ServiceDetail folderId="d7128cef34420142706c03d2d382bf0c" id="d7128cef34420142706c03d2d382bf52" version="2">
                        <l7:Name>Sample Service</l7:Name>
                        <l7:Enabled>true</l7:Enabled>
                        <l7:ServiceMappings>
                            <l7:HttpMapping>
                                <l7:UrlPattern>/Sample</l7:UrlPattern>
                                <l7:Verbs>
                                    <l7:Verb>GET</l7:Verb>
                                    <l7:Verb>POST</l7:Verb>
                                    <l7:Verb>PUT</l7:Verb>
                                    <l7:Verb>DELETE</l7:Verb>
                                </l7:Verbs>
                            </l7:HttpMapping>
                        </l7:ServiceMappings>
                        <l7:Properties>
                            <l7:Property key="internal">
                                <l7:BooleanValue>false</l7:BooleanValue>
                            </l7:Property>
                            <l7:Property key="policyRevision">
                                <l7:LongValue>3</l7:LongValue>
                            </l7:Property>
                            <l7:Property key="soap">
                                <l7:BooleanValue>false</l7:BooleanValue>
                            </l7:Property>
                            <l7:Property key="tracingEnabled">
                                <l7:BooleanValue>false</l7:BooleanValue>
                            </l7:Property>
                            <l7:Property key="wssProcessingEnabled">
                                <l7:BooleanValue>false</l7:BooleanValue>
                            </l7:Property>
                        </l7:Properties>
                    </l7:ServiceDetail>
                    <l7:Resources>
                        <l7:ResourceSet tag="policy">
                            <l7:Resource type="policy" version="2">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;wsp:Policy xmlns:L7p="http://www.layer7tech.com/ws/policy" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy"&gt;
    &lt;wsp:All wsp:Usage="Required"&gt;
        &lt;L7p:Authentication&gt;
            &lt;L7p:IdentityProviderOid goidValue="d7128cef34420142706c03d2d382bee7"/&gt;
        &lt;/L7p:Authentication&gt;
        &lt;L7p:SetVariable&gt;
            &lt;L7p:Base64Expression stringValue="JHtnYXRld2F5LmNsdXN0ZXIuaG9zdG5hbWV9"/&gt;
            &lt;L7p:VariableToSet stringValue="clusterHost"/&gt;
        &lt;/L7p:SetVariable&gt;
        &lt;L7p:HttpRoutingAssertion&gt;
            &lt;L7p:ProtectedServiceUrl stringValue="https://sample_url.com"/&gt;
            &lt;L7p:RequestHeaderRules httpPassthroughRuleSet="included"&gt;
                &lt;L7p:ForwardAll booleanValue="true"/&gt;
                &lt;L7p:Rules httpPassthroughRules="included"&gt;
                    &lt;L7p:item httpPassthroughRule="included"&gt;
                        &lt;L7p:Name stringValue="Cookie"/&gt;
                    &lt;/L7p:item&gt;
                    &lt;L7p:item httpPassthroughRule="included"&gt;
                        &lt;L7p:Name stringValue="SOAPAction"/&gt;
                    &lt;/L7p:item&gt;
                &lt;/L7p:Rules&gt;
            &lt;/L7p:RequestHeaderRules&gt;
            &lt;L7p:RequestParamRules httpPassthroughRuleSet="included"&gt;
                &lt;L7p:ForwardAll booleanValue="true"/&gt;
                &lt;L7p:Rules httpPassthroughRules="included"/&gt;
            &lt;/L7p:RequestParamRules&gt;
            &lt;L7p:ResponseHeaderRules httpPassthroughRuleSet="included"&gt;
                &lt;L7p:ForwardAll booleanValue="true"/&gt;
                &lt;L7p:Rules httpPassthroughRules="included"&gt;
                    &lt;L7p:item httpPassthroughRule="included"&gt;
                        &lt;L7p:Name stringValue="Set-Cookie"/&gt;
                    &lt;/L7p:item&gt;
                &lt;/L7p:Rules&gt;
            &lt;/L7p:ResponseHeaderRules&gt;
            &lt;L7p:SamlAssertionVersion intValue="2"/&gt;
        &lt;/L7p:HttpRoutingAssertion&gt;
    &lt;/wsp:All&gt;
&lt;/wsp:Policy&gt;
</l7:Resource>
                        </l7:ResourceSet>
                    </l7:Resources>
                </l7:Service>
            </l7:Resource>
        </l7:Item>
    </l7:References>
    <l7:Mappings>
        <l7:Mapping action="NewOrExisting" srcId="0000000000000000ffffffffffffec76" srcUri="https://ip-172-31-6-116.ec2.internal:8443/restman/1.0/folders/0000000000000000ffffffffffffec76" type="FOLDER">
            <l7:Properties>
                <l7:Property key="FailOnNew">
                    <l7:BooleanValue>true</l7:BooleanValue>
                </l7:Property>
            </l7:Properties>
        </l7:Mapping>
        <l7:Mapping action="NewOrUpdate" srcId="d7128cef34420142706c03d2d382bf0c" srcUri="https://ip-172-31-6-116.ec2.internal:8443/restman/1.0/folders/d7128cef34420142706c03d2d382bf0c" type="FOLDER"/>
        <l7:Mapping action="NewOrUpdate" srcId="d7128cef34420142706c03d2d382bee7" srcUri="https://ip-172-31-6-116.ec2.internal:8443/restman/1.0/identityProviders/d7128cef34420142706c03d2d382bee7" type="ID_PROVIDER_CONFIG"/>
        <l7:Mapping action="NewOrUpdate" srcId="0000000000000000fffffffffff5519f" srcUri="https://ip-172-31-6-116.ec2.internal:8443/restman/1.0/clusterProperties/0000000000000000fffffffffff5519f" type="CLUSTER_PROPERTY">
            <l7:Properties>
                <l7:Property key="MapBy">
                    <l7:StringValue>name</l7:StringValue>
                </l7:Property>
            </l7:Properties>
        </l7:Mapping>
        <l7:Mapping action="NewOrUpdate" srcId="00000000000000000000000000000002:SSL" srcUri="https://ip-172-31-6-116.ec2.internal:8443/restman/1.0/privateKeys/00000000000000000000000000000002:SSL" type="SSG_KEY_ENTRY"/>
        <l7:Mapping action="NewOrUpdate" srcId="d7128cef34420142706c03d2d382bf52" srcUri="https://ip-172-31-6-116.ec2.internal:8443/restman/1.0/services/d7128cef34420142706c03d2d382bf52" type="SERVICE"/>
    </l7:Mappings>
</l7:Bundle>
